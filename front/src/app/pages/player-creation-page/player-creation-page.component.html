<app-page-background-image image="players-creation-page" />

<app-page-wrapper>
	<app-back-arrow link=".." text="Retour vers mes joueurs" />

	<div class="page-centered-description-wrapper">
		<h1 class="white-title">Créer un nouveau joueur</h1>
	</div>

	@if (!isLoading) {
		@if (creatablePlayers.length) {
			<div id="creatable-player-wrapper">
				<div id="creatable-players-list">
					<!-- Players list -->
					@for (player of creatablePlayers; track player.class.type) {
						<app-creatable-player-icon
							[player]="player"
							(playerSelected)="selectPlayer(player)"
							[isSelected]="player.class.type === this.selectedPlayer?.class?.type"
						/>
					}
				</div>

				@if (selectedPlayer) {
					<app-selected-player [class]="selectedPlayer.class.type"></app-selected-player>

					<!-- Selected player display -->
					<app-creatable-player-card [player]="selectedPlayer"></app-creatable-player-card>
				}
			</div>

			<div class="main-button-wrapper">
				<button
					(click)="onSubmit()"
					class="base-button"
					type="submit"
					[disabled]="!selectedPlayer"
				>
					<span>Créer le joueur</span>
				</button>
			</div>
		}

		@else {
			<p>Vous avez débloqué et créé tous les joueurs créables (message à changer)</p>
		}
	}

	@else {
		<p>Chargement...</p>
	}
</app-page-wrapper>
